import{r as a,U as C,b as w,M as c,a as o,j as s,ay as G,Z as u,W as g}from"./index.49192afe.js";import{M as B}from"./index.d6f5ae87.js";import{C as L}from"./index.b723ad44.js";/* empty css             */function P({setShow:i}){const[h,l]=a.exports.useState(`Waiting for messages...
`),f=()=>{const e=new EventSource("/eapi/v1/image/pull?name="+m+"&version="+p+"&repoId="+d);return e.addEventListener("message",n=>{try{const t=JSON.parse(n.data);t.id===void 0&&(t.id=""),t.status===void 0&&(t.status=""),t.progress===void 0&&(t.progress="");const r=t.id+" "+t.status+" "+t.progress+`
`;l(j=>j+r)}catch(t){l("\u89E3\u6790\u9519\u8BEF: "+t.message)}}),e.addEventListener("error",n=>{console.log(n),l(t=>t+`\u62C9\u53D6\u5931\u8D25
`),e.close(),c.error("\u62C9\u53D6\u5931\u8D25"),i(!1)}),e.addEventListener("complete",()=>{console.log("\u62C9\u53D6\u5B8C\u6210"),l(n=>n+`\u955C\u50CF\u62C9\u53D6\u5B8C\u6210
`),e.close(),setTimeout(()=>{c.success("\u955C\u50CF\u62C9\u53D6\u5B8C\u6210"),i(!1)},500)}),()=>{console.log("\u7EC4\u4EF6\u5378\u8F7D\uFF0C\u5173\u95ED\u8FDE\u63A5"),e.close()}},y=C.Option,[d,F]=a.exports.useState(""),[v,x]=a.exports.useState([]);a.exports.useEffect(()=>{w.post("/eapi/v1/repo/down").then(e=>{const{code:n,msg:t,data:r}=e.data;n!=="0"?c.error(t):x(r)}).catch(e=>{console.log(e)})},[]);const[m,D]=a.exports.useState(""),[p,I]=a.exports.useState(""),E=()=>{console.log(m,p,d),f()},[S,M]=a.exports.useState(!0);return o(B,{title:"Pull Image",visible:S,style:{width:"620px"},className:"modal-demo-without-content-spacing",onCancel:()=>{i(!1)},onOk:()=>{E()},children:[s(G,{type:"info",content:"Pulling image..."}),s(L,{children:o(u,{cols:1,colGap:8,rowGap:24,children:[o(u.GridItem,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[s("span",{style:{fontWeight:600},children:"\u955C\u50CF\u4ED3\u5E93:"}),s("div",{children:s(C,{placeholder:"Select Repo",style:{width:194,marginLeft:20},onChange:e=>{F(e)},children:v.map((e,n)=>s(y,{value:e.id,children:e.repoName},e.id))})})]}),o(u.GridItem,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[s("span",{style:{fontWeight:600},children:"\u955C\u50CF\u540D\u79F0:"}),s("div",{children:s(g,{style:{width:194,marginLeft:20},placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u540D\u79F0",onChange:e=>{D(e)}})})]}),o(u.GridItem,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[s("span",{style:{fontWeight:600},children:"\u955C\u50CF\u7248\u672C:"}),s("div",{children:s(g,{allowClear:!0,style:{width:194,marginLeft:20},placeholder:"\u8BF7\u8F93\u5165\u955C\u50CF\u7248\u672C",onChange:e=>{I(e)}})})]}),s(u.GridItem,{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:o("div",{className:"terminal",children:[`<============================\u955C\u50CF\u62C9\u53D6\u65E5\u5FD7========================>
`,h]})})]})})]})}export{P as default};
