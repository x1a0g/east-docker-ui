import{r as a,b,M as r,j as e,T as B,aB as O,a as g,d as M,W as L,F as P,Z as p,B as h}from"./index.49192afe.js";import{C as R}from"./index.b723ad44.js";import{T as _}from"./index.6665e97f.js";import{L as x}from"./index.61758800.js";import{M as j}from"./index.0df300da.js";import z from"./search.b9edb3d9.js";import J from"./pull.c9fc61c9.js";import K from"./import.d3f5faf7.js";import N from"./info.ea648631.js";import"./index.d6f5ae87.js";/* empty css             */import"./index.525c83b4.js";const D=["#f53f3f","#7816ff","#00b42a","#165dff","#ff7d00","#eb0aa4","#7bc616","#86909c","#b71de8","#0fc6c2"],G=({err:w,dfe:c})=>{const f=[{title:"\u955C\u50CF\u540D\u79F0",dataIndex:"name"},{title:"\u955C\u50CF ID",dataIndex:"id",render:(s,t)=>e("div",{children:e(B,{content:t.id,children:e("span",{children:t.id.split(":")[1].substring(0,16)})})})},{title:"Tags",dataIndex:"repoTags",render:(s,t)=>e("div",{children:t.repoTags.map(o=>e(O,{color:D[Math.floor(Math.random()*D.length)],children:e(B,{content:o,children:e("span",{children:o.substring(0,12)})})},o))})},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"created"},{title:"\u955C\u50CF\u5927\u5C0F",dataIndex:"size"},{title:"\u64CD\u4F5C",dataIndex:"ac",render:(s,t)=>g(M,{children:[e(x,{onClick:()=>I(t),status:"error",children:"\u5220\u9664"}),e(x,{onClick:()=>{C(t)},children:"\u8BE6\u60C5"}),e(x,{href:"/eapi/v1/image/export?id="+t.id,status:"success",children:"\u5BFC\u51FA"})]})}],C=s=>{localStorage.setItem("infoImageId",s.id),c(!0)},I=s=>{console.log(s);let t=[];t.push(s.id),b.post("/eapi/v1/image/del",{ids:t}).then(o=>{const{code:i,msg:m}=o.data;i!=="0"?(r.error(m),l()):(r.success("\u5220\u9664\u6210\u529F"),l())}).catch(o=>{console.log(o)})},[F,S]=a.exports.useState([]);a.exports.useEffect(()=>{l()},[]);const l=()=>{b.post("/eapi/v1/image/list").then(s=>{const{code:t,msg:o,data:i}=s.data;t!=="0"?r.error(o):S(i)}).catch(s=>{r.error(s)}).finally(()=>{})};let d=[];return e(_,{columns:f,data:F,pagination:!1,rowKey:"id",border:{headerCell:!0,wrapper:!0},rowSelection:{type:"checkbox",onChange:(s,t)=>{d=s.map(o=>String(o)),localStorage.setItem("chooseImageIds",JSON.stringify(d)),console.log(d)}}})};L.Search;function se(){const[w,c]=a.exports.useState(!1),[f,C]=a.exports.useState(""),I=n=>{C(n),c(!0)},F=()=>{c(!1)},[S,l]=a.exports.useState(!1),[d,s]=a.exports.useState(!1),t=n=>{b.post("/eapi/v1/image/del",{ids:n}).then(u=>{const{code:v,msg:A}=u.data;v!=="0"?r.error(A):r.success("\u5220\u9664\u6210\u529F")}).catch(u=>{console.log(u)})},o=()=>{let n=localStorage.getItem("chooseImageIds");if(n!=="[]"){let u=JSON.parse(n);t(u),s(!0)}else r.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u955C\u50CF")},[i,m]=a.exports.useState(!1),[k,y]=a.exports.useState(!1),[E,T]=a.exports.useState(!1);return g(P,{children:[w&&e(j,{handleClose:F,errorMessage:f}),S&&e(z,{setImageV:l}),i&&e(J,{setShow:m}),k&&e(K,{setShow:y}),E&&e(N,{setShow:T}),g(R,{style:{height:"80vh"},children:[e(p.Row,{style:{marginTop:50},children:e(p.Col,{span:24,style:{marginBottom:32,marginLeft:32},children:g(M,{size:16,children:[e(h,{type:"outline",onClick:()=>y(!0),children:"\u5BFC\u5165\u955C\u50CF"}),e(h,{type:"outline",onClick:()=>o(),children:"\u5220\u9664\u955C\u50CF"}),e(h,{type:"outline",onClick:()=>m(!0),children:"\u62C9\u53D6\u955C\u50CF"}),e(h,{type:"outline",onClick:()=>l(!0),children:"\u641C\u7D22\u955C\u50CF"})]})})}),e(p.Row,{children:e(p.Col,{span:24,children:e(G,{err:I,dfe:T})})})]})]})}export{se as default};
