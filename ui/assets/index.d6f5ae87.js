import{$ as T,R as k,a0 as Oe,a1 as en,a2 as nn,a3 as rn,a4 as Me,a5 as on,a6 as tn,a7 as an,r as u,j as f,a8 as ln,a9 as sn,aa as un,C as cn,u as fn,e as dn,ab as pn,ac as vn,ad as mn,g as Cn,a as ne,I as gn,ae as hn,c as Ee,af as bn,F as we,ag as xn,ah as Te,o as yn,h as Pe,ai as kn,B as _e}from"./index.49192afe.js";var y=globalThis&&globalThis.__assign||function(){return y=Object.assign||function(e){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},y.apply(this,arguments)};function On(e){var r=an(),o=r.prefixCls,a=r.simple;return k.createElement(Ie,y({prefixCls:o,simple:a},e),e.content)}var D=function(e){var r=e.icon;if(!r&&r!==null&&(r=k.createElement(Oe,null),e.isNotice))switch(e.noticeType){case"info":r=k.createElement(rn,null);break;case"success":r=k.createElement(nn,null);break;case"warning":r=k.createElement(Oe,null);break;case"error":r=k.createElement(en,null);break}return e.isNotice&&(e.hideCancel=!0),e.title=r===null&&e.title===null?null:k.createElement("span",null,r,e.title),e};function Re(e,r){var o,a=document.createElement("div");document.body.appendChild(a);var t=tn();function s(c){var p=k.createElement(Me,y({},t),k.createElement(On,y({},c,{onCancel:v})));o?o.render(p):o=on(p,a)}var n=r||s,i=y(y({},e),{visible:!1}),O=function(){var c,p=e.onOk||e.onConfirm;p&&(c=p()),c&&c.then&&(i.confirmLoading=!0,n(i),c.then(function(){v(!0)},function(E){console.error(E),i.confirmLoading=!1,n(i)})),c||v(!0)};i.onOk=O,i=D(i),i.visible=!0,n(i);function d(){o=o==null?void 0:o._unmount(),a.parentNode&&a.parentNode.removeChild(a);for(var c=0;c<T.length;c++){var p=T[c];if(p===x){T.splice(c,1);break}}}function v(c){!c&&e.onCancel&&e.onCancel(),i.visible=!1,i.afterClose=function(){e.afterClose&&e.afterClose(),d()},n(i)}function g(c){i=y(y(y({},i),{title:e.title}),c),i=D(i),n(i)}function x(){i.visible=!1,i.afterClose=function(){e.afterClose&&e.afterClose(),d()},n(i)}return T.push(x),{close:x,update:g}}var w=globalThis&&globalThis.__assign||function(){return w=Object.assign||function(e){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},w.apply(this,arguments)},Ne=globalThis&&globalThis.__read||function(e,r){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var a=o.call(e),t,s=[],n;try{for(;(r===void 0||r-- >0)&&!(t=a.next()).done;)s.push(t.value)}catch(i){n={error:i}}finally{try{t&&!t.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return s};function En(e,r){var o=Ne(u.exports.useState(!0),2),a=o[0],t=o[1],s=Ne(u.exports.useState(e),2),n=s[0],i=s[1];u.exports.useImperativeHandle(r,function(){return{update:function(v){i(v)},close:function(){t(!1)}}});function O(){var v=n.onOk&&n.onOk();v&&v.then&&(i(function(g){return w(w({},g),{confirmLoading:!0})}),v.then(function(){t(!1)},function(g){console.error(g),i(function(x){return w(w({},x),{confirmLoading:!1})})})),v||t(!1)}function d(){n.onCancel&&n.onCancel(),t(!1)}return f(Ie,{...w({unmountOnExit:!0,simple:!0},n,{visible:a,onOk:O,onCancel:d}),children:n.content})}var wn=u.exports.forwardRef(En),h=globalThis&&globalThis.__assign||function(){return h=Object.assign||function(e){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},h.apply(this,arguments)};function Tn(){var e=u.exports.useRef(),r=f(ln,{ref:e}),o=0;function a(s){var n;o+=1;var i=u.exports.createRef(),O=h({},s);function d(){s.afterClose&&s.afterClose(),g()}var v=f(wn,{...h({key:o,ref:i},D(h({},s)),{afterClose:d})});(n=e.current)===null||n===void 0||n.addInstance(v);function g(){var p;(p=e.current)===null||p===void 0||p.removeInstance(v)}function x(){var p;(p=i.current)===null||p===void 0||p.close()}function c(p){var E;O=h(h({},O),p),(E=i.current)===null||E===void 0||E.update(D(h({},O)))}return T.push(x),{close:x,update:c}}var t={confirm:function(s){return a(h({},s))}};return["info","success","warning","error"].forEach(function(s){t[s]=function(n){return a(h(h({},n),{isNotice:!0,noticeType:s}))}}),[t,r]}var b=globalThis&&globalThis.__assign||function(){return b=Object.assign||function(e){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},b.apply(this,arguments)},Pn=globalThis&&globalThis.__rest||function(e,r){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(e);t<a.length;t++)r.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(e,a[t])&&(o[a[t]]=e[a[t]]);return o},re=globalThis&&globalThis.__read||function(e,r){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var a=o.call(e),t,s=[],n;try{for(;(r===void 0||r-- >0)&&!(t=a.next()).done;)s.push(t.value)}catch(i){n={error:i}}finally{try{t&&!t.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return s},oe=null,_n=0;sn||document.documentElement.addEventListener("click",function(e){oe={left:e.clientX,top:e.clientY},setTimeout(function(){oe=null},100)},!0);var Nn={mask:!0,maskClosable:!0,mountOnEnter:!0,escToExit:!0,getPopupContainer:function(){return document.body},alignCenter:!0};function Mn(e,r){var o,a,t,s=u.exports.useContext(cn),n=fn(e,Nn,(t=s.componentConfig)===null||t===void 0?void 0:t.Modal),i=n.className,O=n.style,d=n.visible,v=n.simple,g=n.title,x=n.children,c=n.cancelText,p=n.okText,E=n.okButtonProps,Fe=n.cancelButtonProps,te=n.getPopupContainer,H=te===void 0?function(){return document.body}:te,S=n.footer,V=n.afterClose,Se=n.confirmLoading,A=n.mountOnEnter,z=n.unmountOnExit,W=n.afterOpen,Le=n.hideCancel,ae=n.autoFocus,le=n.focusLock,je=n.maskClosable,L=n.mask,Be=n.alignCenter,ie=n.getChildrenPopupContainer,$e=n.wrapClassName,Z=n.escToExit,se=n.modalRender,De=n.maskStyle,He=n.wrapStyle,ue=n.closeIcon,Ve=Pn(n,["className","style","visible","simple","title","children","cancelText","okText","okButtonProps","cancelButtonProps","getPopupContainer","footer","afterClose","confirmLoading","mountOnEnter","unmountOnExit","afterOpen","hideCancel","autoFocus","focusLock","maskClosable","mask","alignCenter","getChildrenPopupContainer","wrapClassName","escToExit","modalRender","maskStyle","wrapStyle","closeIcon"]),M=u.exports.useRef(null),ce=u.exports.useRef(null),j=u.exports.useRef(null),fe=re(u.exports.useState(),2),de=fe[0],pe=fe[1],ve=re(u.exports.useState(),2),me=ve[0],Ae=ve[1],B=u.exports.useRef(null),Ce=u.exports.useRef(!1),R=u.exports.useRef(!1),K=u.exports.useRef(!0);d&&K.current&&(K.current=!1);var $=u.exports.useRef();$.current||($.current=_n++);var ge=re(dn(!1,{defaultValue:!1,value:Se}),2),ze=ge[0],U=ge[1],m=s.getPrefixCls("modal",n.prefixCls),X=s.locale,he=s.rtl,We=!v,Ze="closable"in n?n.closable:We,Ke=u.exports.useCallback(function(){return pn(H())},[H]);vn(Ke,{hidden:d&&L});var I=function(){n.onCancel&&n.onCancel()},be=function(l){Z&&d&&l.key===kn.key&&(l.stopPropagation(),I())},Y=u.exports.useRef(!1),Ue=function(l){!R.current||(R.current=!1,!Y.current&&je&&L&&l.target===l.currentTarget&&setTimeout(function(){I()},100))},Xe=function(l){var C=n.onConfirm,_=n.onOk,F=_||C,N;F&&(N=F(l)),N&&N.then&&(U(!0),N.then(function(){U(!1)},function(ee){U(!1),console.error(ee)}))};u.exports.useEffect(function(){var l=null;return Z&&(l=setTimeout(function(){var C;mn(document.body,M.current)&&((C=M.current)===null||C===void 0||C.focus())})),function(){l&&clearTimeout(l)}},[d,Z]);var Ye=function(){var l;if(d&&me===void 0&&M.current){var C=+((l=window.getComputedStyle(M.current,null))===null||l===void 0?void 0:l.zIndex);isNaN(C)||Ae(C+1)}},qe=function(){if(S!==null){var l=f(_e,{...b({onClick:I},Fe),children:c||X.Modal.cancelText}),C=f(_e,{...b({loading:ze,onClick:Xe,type:"primary"},E),children:p||X.Modal.okText}),_=Pe(S)?S(l,C):S||ne(we,{children:[!Le&&l,C]});return f("div",{className:m+"-footer",children:_})}},q=s.focusLock.modal,Ge=!!q,Je=Cn(q)&&q.autoFocus,G=le!==void 0?le:Ge,J=ae!==void 0?ae:Je,xe=ne(Me,{...b({},s,{prefixCls:n.prefixCls||s.prefixCls,locale:X,zIndex:me||1050,getPopupContainer:function(l){return typeof ie=="function"?ie(l):ce.current}}),children:[g&&f("div",{className:m+"-header",children:f("div",{className:m+"-title",id:"arco-dialog-"+$.current,children:g})}),f("div",{ref:ce,className:m+"-content",children:x}),qe(),Ze&&(ue!==void 0?f("span",{onClick:I,className:m+"-close-icon",children:ue}):f(gn,{tabIndex:-1,onClick:I,className:m+"-close-icon",role:"button","aria-label":"Close",children:f(hn,{})}))]}),Qe=g?{"aria-labelledby":"arco-dialog-"+$.current}:{},ye=f("div",{...b({role:"dialog","aria-modal":"true"},Qe,{className:Ee(m,(o={},o[m+"-simple"]=v,o[m+"-rtl"]=he,o),i),style:O,ref:j}),children:G?f(bn,{crossFrame:!1,disabled:!d,autoFocus:J,lockProps:{tabIndex:-1,onKeyDown:be},children:xe}):f(we,{children:xe})}),Q=function(l){if(!Ce.current){var C="";if(B.current){var _=l.getBoundingClientRect(),F=B.current,N=F.left,ee=F.top;C=N-_.left+"px "+(ee-_.top)+"px"}l.style.transformOrigin=C}},ke=K.current?!A:!!j.current;return d||ke?f(xn,{visible:d,forceRender:ke,getContainer:H,children:ne("div",{ref:r,children:[L?f(Te,{in:d,timeout:400,appear:!0,mountOnEnter:A,classNames:"fadeModal",unmountOnExit:z,onEnter:function(l){!l||(l.style.display="block")},onExited:function(l){!l||(l.style.display="none")},children:f("div",{"aria-hidden":!0,className:m+"-mask",style:De})}):null,f("div",{...b({},yn(Ve,["content","icon","showIcon","isNotice","noticeType","onCancel","onOk","onConfirm","closable","prefixCls"]),{tabIndex:!G||!J?-1:null,ref:function(l){M.current=l,Ye()},className:Ee(m+"-wrapper",(a={},a[m+"-wrapper-no-mask"]=!L,a[m+"-wrapper-align-center"]=Be,a[m+"-wrapper-rtl"]=he,a),$e),style:b(b({},He||{}),{display:d||de?"block":"none",overflow:!d&&de?"hidden":""}),onKeyDown:!G||!J?be:null,onMouseDown:function(l){R.current=l.target===l.currentTarget},onClick:Ue}),children:f(Te,{in:d,timeout:400,appear:!0,classNames:"zoomModal",unmountOnExit:z,mountOnEnter:A,onEnter:function(l){!l||(pe(!0),B.current=oe,Ce.current=!!l.style.transformOrigin,Q(l),j.current=l)},onEntered:function(l){!l||(Q(l),B.current=null,W==null||W())},onExit:function(){Y.current=!0},onExited:function(l){!l||(pe(!1),Q(l),V==null||V(),Y.current=!1,z&&(j.current=null))},children:k.cloneElement(Pe(se)?se(ye):ye,{onMouseDown:function(){R.current=!1},onMouseUp:function(){R.current=!1}})})})]})}):null}var P=u.exports.forwardRef(Mn);P.displayName="Modal";P.config=un;P.confirm=function(e){return Re(e)};P.useModal=Tn;["info","success","warning","error"].forEach(function(e){P[e]=function(r){return Re(b(b({},r),{isNotice:!0,noticeType:e}))}});P.destroyAll=function(){for(;T.length;){var e=T.pop();e&&e()}};var Ie=P;export{Ie as M};
