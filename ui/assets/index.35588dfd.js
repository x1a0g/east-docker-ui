import{U as S,r as d,b as T,M as f,j as e,a as r,d as b,W as s,X as C,Y as $,R as q,F as H,Z as k,B as J}from"./index.49192afe.js";import{C as Q}from"./index.b723ad44.js";import _ from"./contable.69c69394.js";import{M as ee}from"./index.d6f5ae87.js";import{L as O}from"./index.61758800.js";import"./index.6665e97f.js";function te({setClos:y}){const c=S.Option,[z,R]=d.exports.useState([{id:"",name:""}]),U=["ro","rw"],[i,o]=d.exports.useState({name:"",dockerConfig:{image:""},host:{disableSwap:!1}}),[B,K]=d.exports.useState(""),[E,N]=d.exports.useState(""),[w,v]=d.exports.useState([]),[D,L]=d.exports.useState([]),[P,W]=d.exports.useState([]),[M,V]=d.exports.useState([]),G=()=>{if(B!==void 0||B!=="")try{let n=B.split(",");if(n.length>0){let l=i;l.dockerConfig.cmd=n,o(l)}}catch(n){console.log(n)}if(E!==void 0||E!=="")try{let n=E.split(",");if(n.length>0){let l=i;l.dockerConfig.healthCheck.test=n,o(l)}}catch(n){console.log(n)}let t=new Map;if(F.map((n,l)=>{t.set(n.key,n.value)}),t.size>0){let n=i;const l=Object.fromEntries(t);n.dockerConfig.envs=l,o(n)}if(w.length>0){let n=i;n.host.binds=w,o(n)}if(D.length>0){let n=i;n.host.portMapping=D,o(n)}T.post("/eapi/v1/con/create",{container:i}).then(n=>{const{code:l,msg:a}=n.data;l!=="0"?f.error(a):f.success("\u521B\u5EFA\u6210\u529F")}).catch(n=>{f.error(n)}).finally(()=>{y(!1)})};d.exports.useEffect(()=>{T.post("/eapi/v1/image/list").then(t=>{const{code:n,msg:l,data:a}=t.data;n!=="0"?f.error(l):R(a.map(h=>({id:h.id,name:h.name})))}).catch(t=>{f.error(t)})},[]);const[F,I]=d.exports.useState([{key:"",value:""}]),X=()=>{I([...F,{key:"",value:""}])},Y=()=>{const t=[...F];t.pop(),I(t)},x=(t,n,l)=>{const a=[...F];a[t][n]=l,I(a)},[u,j]=d.exports.useState([]),Z=t=>{T.get(`/eapi/v1/image/info/${t}`).then(n=>{const{code:l,msg:a,data:h}=n.data;if(l!=="0")console.log(a);else{if(v([]),L([]),h.Config.Volumes!==void 0){let A=h.Config.Volumes,g=[],p=[];for(const m in A)g.push(m),p.push({hostPath:"",containerPath:m,mode:""});W(g),v(p)}else W([]);if(h.Config.ExposedPorts!==void 0){let A=h.Config.ExposedPorts,g=[],p=[];for(const m in A)g.push(m),p.push({containerPort:m,hostPort:[]});L(p),V(g)}else V([])}})};return e(ee,{title:"\u521B\u5EFA\u5BB9\u5668",style:{width:"560px"},className:"modal-demo-without-content-spacing",visible:!0,onOk:()=>{G()},onCancel:()=>{y(!1)},children:r(b,{direction:"vertical",size:1,style:{width:"100%"},children:[r("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[e("span",{style:{fontWeight:600},children:"\u5BB9\u5668\u540D\u79F0"}),e(s,{style:{width:250,marginLeft:20},allowClear:!0,placeholder:"name",onChange:t=>{o({...i,name:t})}})]}),e(C,{orientation:"center",style:{height:"#000"},children:"\u955C\u50CF\u914D\u7F6E"}),r("div",{style:{width:"100%",display:"flex",alignItems:"center"},children:[e("span",{style:{fontWeight:600},children:"\u955C\u50CF\u540D\u79F0"}),e(S,{placeholder:"\u9009\u62E9\u955C\u50CF",style:{width:250,marginLeft:40},labelInValue:!0,onChange:t=>{Z(t.value),o({...i,dockerConfig:{...i.dockerConfig,image:t.label}})},children:z.map((t,n)=>e(c,{value:t.id,children:t.name},t.id))},"select")]}),r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"\u73AF\u5883\u53D8\u91CF"}),e(s,{style:{width:150,marginLeft:40},allowClear:!0,placeholder:"key",onChange:t=>{x(0,"key",t)}}),e(s,{style:{width:150,marginLeft:20},allowClear:!0,placeholder:"value",onChange:t=>{x(0,"value",t)}}),e(O,{style:{marginLeft:20},onClick:()=>{j([...u,1]),X()},children:"add"}),u.length>0&&e(O,{style:{marginLeft:20},onClick:()=>{j(u.slice(0,u.length-1)),Y()},children:"del"})]}),u.map((t,n)=>r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"\u73AF\u5883\u53D8\u91CF"}),e(s,{style:{width:150,marginLeft:40},allowClear:!0,placeholder:"key",onChange:l=>{x(n+1,"key",l)}}),e(s,{style:{width:150,marginLeft:20},allowClear:!0,placeholder:"value",onChange:l=>{x(n+1,"value",l)}})]})),r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"\u547D\u4EE4\u884C\u53C2\u6570"}),e(s.TextArea,{style:{width:350,marginLeft:20},placeholder:"\u4F8B\u5982: nginx,-s,reload",onChange:t=>{K(t)}})]}),e(C,{orientation:"center",children:"\u5065\u5EB7\u68C0\u67E5"}),r("div",{style:{width:"100%",display:"flex",alignItems:"center"},children:[e("span",{style:{fontWeight:600},children:"\u68C0\u6D4B\u547D\u4EE4"}),e(s.TextArea,{style:{width:350,marginLeft:20},placeholder:"\u4F8B\u5982: CMD,curl,--fail,http://localhost:3306",onChange:t=>{N(t)}})]}),r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"\u68C0\u6D4B\u95F4\u9694"}),e(s,{style:{width:350,marginLeft:20},placeholder:"\u68C0\u6D4B\u95F4\u9694",onChange:t=>{o({...i,dockerConfig:{...i.dockerConfig,healthCheck:{...i.dockerConfig.healthCheck,interval:parseInt(t)}}})}})]}),r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"\u8D85\u65F6\u65F6\u95F4"}),e(s,{style:{width:350,marginLeft:20},placeholder:"\u8D85\u65F6\u65F6\u95F4",onChange:t=>{o({...i,dockerConfig:{...i.dockerConfig,healthCheck:{...i.dockerConfig.healthCheck,timeout:parseInt(t)}}})}})]}),r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"\u91CD\u8BD5\u6B21\u6570"}),e(s,{style:{width:350,marginLeft:20},placeholder:"\u91CD\u8BD5\u6B21\u6570",onChange:t=>{o({...i,dockerConfig:{...i.dockerConfig,healthCheck:{...i.dockerConfig.healthCheck,retries:parseInt(t)}}})}})]}),e(C,{orientation:"center",children:"\u4E3B\u673A\u914D\u7F6E"}),r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"\u5185\u5B58\u9650\u5236"}),e(s,{style:{width:250,marginLeft:20},addAfter:"MB",placeholder:"\u5185\u5B58\u9650\u5236",onChange:t=>{o({...i,host:{...i.host,memoryMB:parseInt(t)}})}})]}),r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"\u4EA4\u6362\u5185\u5B58"}),e($,{checkedText:"\u542F\u7528",uncheckedText:"\u505C\u7528",style:{width:60,marginLeft:20},onChange:t=>{o({...i,host:{...i.host,disableSwap:t}})}})]}),r("div",{style:{width:"100%",display:"flex",alignItems:"center",marginTop:10},children:[e("span",{style:{fontWeight:600},children:"CPU\u914D\u989D"}),e(s,{style:{width:250,marginLeft:20},addAfter:"%",placeholder:"CPU\u914D\u989D",onChange:t=>{o({...i,host:{...i.host,cpuPercent:parseInt(t)}})}})]}),P.length>0&&e(C,{orientation:"center",children:"\u6570\u636E\u5377\u6302\u8F7D"}),P.map((t,n)=>r("div",{style:{width:"100%",display:"flex",alignItems:"center"},children:[e(s,{style:{width:150,marginLeft:10},placeholder:"\u4E3B\u673A\u8DEF\u5F84",onChange:l=>{let a=[...w];a[n].hostPath=l,v(a)}}),e("span",{style:{marginLeft:10},children:":"}),e(s,{style:{width:150,marginLeft:10},placeholder:"\u5BB9\u5668\u8DEF\u5F84",disabled:!0,value:t}),e("span",{style:{marginLeft:10},children:":"}),e(S,{placeholder:"\u9009\u62E9\u6A21\u5F0F",style:{width:150,marginLeft:10},onChange:l=>{let a=[...w];a[n].mode=l,v(a)},children:U.map((l,a)=>e(c,{disabled:a===3,value:l,children:l},l))})]})),M.length>0&&e(C,{orientation:"center",children:"\u7AEF\u53E3\u6620\u5C04"}),M.map((t,n)=>r("div",{style:{width:"100%",display:"flex",alignItems:"center"},children:[e(s,{style:{width:250,marginLeft:10},placeholder:"\u4E3B\u673A\u7AEF\u53E3\uFF0C\u4F8B\u5982: 3306",onChange:l=>{let a=[...D],h=[];h.push(Number(l)),a[n].hostPort=h,L(a)}}),e("span",{style:{marginLeft:10},children:":"}),e(s,{style:{width:250,marginLeft:10},placeholder:"\u5BB9\u5668\u7AEF\u53E3",disabled:!0,value:t})]}))]})})}s.Search;function oe(){const[y,c]=q.useState(!1);return r(H,{children:[y&&e(te,{setClos:c}),r(Q,{style:{height:"80vh"},children:[e(b,{direction:"vertical",size:"large"}),e(k.Row,{style:{marginTop:50},children:e(k.Col,{span:24,style:{marginBottom:32,marginLeft:32},children:e(b,{size:16,children:e(J,{type:"outline",onClick:()=>c(!0),children:"\u521B\u5EFA\u5BB9\u5668"})})})}),e(k.Row,{children:e(k.Col,{span:24,children:e(_,{})})})]})]})}export{oe as default};
