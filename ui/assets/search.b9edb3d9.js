import{W as b,U as l,r as s,R as n,b as d,a as p,j as t,ay as T,T as D}from"./index.49192afe.js";import{T as B}from"./index.6665e97f.js";import{M as E}from"./index.d6f5ae87.js";import{C as M}from"./index.b723ad44.js";const N=b.Search;function R({setImageV:h}){function i(){h(!1)}const m=l.Option,[g,f]=s.exports.useState([]),[C,x]=s.exports.useState(""),[y,S]=n.useState([]),[F,I]=s.exports.useState("");let w=[{title:"\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u63CF\u8FF0",dataIndex:"description",key:"description",render:(e,a)=>t(D,{content:a.description,children:t("span",{children:a.description.substring(0,20)})})},{title:"\u5B98\u65B9\u955C\u50CF",dataIndex:"is_official",key:"is_official",render:e=>e?"\u662F":"\u5426"},{title:"star\u6570\u91CF",dataIndex:"star_count"}];const[v,u]=n.useState("\u641C\u7D22\u955C\u50CF\u65F6\u5FC5\u987B\u9009\u62E9\u8981\u641C\u7D22\u7684\u4ED3\u5E93"),[k,c]=n.useState("info");return s.exports.useEffect(()=>{d.post("/eapi/v1/repo/down").then(e=>{const{code:a,msg:r,data:o}=e.data;a!=="0"?(u(r),c("error")):f(o)}).catch(e=>{console.log(e)})},[]),p(E,{title:"Image Search",visible:!0,style:{width:"920px"},className:"modal-demo-without-content-spacing",onOk:()=>i(),onCancel:()=>i(),children:[t(T,{type:k,content:v}),t(M,{children:t("div",{className:"search-img-container",children:p("div",{className:"search-img-input",children:[t(l,{placeholder:"Select Repo",style:{width:154,marginLeft:20},onChange:e=>{x(e)},children:g.map((e,a)=>t(m,{value:e.id,children:e.repoName},e.id))}),t(N,{searchButton:"Search",placeholder:"\u955C\u50CF\u540D\u79F0",onChange:e=>{I(e)},style:{width:250,marginLeft:40},onSearch:()=>{d.get(`/eapi/v1/image/search?repoId=${C}&keyword=${F}`).then(e=>{const{code:a,msg:r,data:o}=e.data;a!=="0"?(u(r),c("error")):S(o)})}}),t(B,{columns:w,data:y,loading:!1,tableLayoutFixed:!0,pagination:{pageSize:5,simple:!0},style:{marginTop:20},border:{headerCell:!0,wrapper:!0}})]})})})]})}export{R as default};
